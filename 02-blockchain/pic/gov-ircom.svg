<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="435px" preserveAspectRatio="none" style="width:739px;height:435px;" version="1.1" viewBox="0 0 739 435" width="739px" zoomAndPan="magnify"><defs><filter height="300%" id="f1muzm3ktb3kdc" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f1muzm3ktb3kdc)" height="290.1328" style="stroke: #000000; stroke-width: 2.0;" width="714" x="13" y="71.5938"/><rect fill="#FFFFFF" height="189.6016" style="stroke: none; stroke-width: 1.0;" width="714" x="13" y="172.125"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="60" x2="60" y1="54.5938" y2="378.7266"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="154" x2="154" y1="54.5938" y2="378.7266"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="257" x2="257" y1="54.5938" y2="378.7266"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="360" x2="360" y1="54.5938" y2="378.7266"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="463" x2="463" y1="54.5938" y2="378.7266"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="566" x2="566" y1="54.5938" y2="378.7266"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="670" x2="670" y1="54.5938" y2="378.7266"/><rect fill="#FEFECE" filter="url(#f1muzm3ktb3kdc)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="71" x="23" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="45" x="36" y="22.9951">NeoFS</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="57" x="30" y="39.292">contract</text><rect fill="#FEFECE" filter="url(#f1muzm3ktb3kdc)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="71" x="23" y="377.7266"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="45" x="36" y="397.7217">NeoFS</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="57" x="30" y="414.0186">contract</text><rect fill="#FEFECE" filter="url(#f1muzm3ktb3kdc)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="89" x="108" y="19.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="75" x="115" y="39.292">InnerRing1</text><rect fill="#FEFECE" filter="url(#f1muzm3ktb3kdc)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="89" x="108" y="377.7266"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="75" x="115" y="397.7217">InnerRing1</text><rect fill="#FEFECE" filter="url(#f1muzm3ktb3kdc)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="89" x="211" y="19.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="75" x="218" y="39.292">InnerRing2</text><rect fill="#FEFECE" filter="url(#f1muzm3ktb3kdc)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="89" x="211" y="377.7266"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="75" x="218" y="397.7217">InnerRing2</text><rect fill="#FEFECE" filter="url(#f1muzm3ktb3kdc)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="89" x="314" y="19.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="75" x="321" y="39.292">InnerRing3</text><rect fill="#FEFECE" filter="url(#f1muzm3ktb3kdc)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="89" x="314" y="377.7266"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="75" x="321" y="397.7217">InnerRing3</text><rect fill="#FEFECE" filter="url(#f1muzm3ktb3kdc)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="89" x="417" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="75" x="424" y="22.9951">InnerRing4</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="33" x="445" y="39.292">(out)</text><rect fill="#FEFECE" filter="url(#f1muzm3ktb3kdc)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="89" x="417" y="377.7266"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="75" x="424" y="397.7217">InnerRing4</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="33" x="445" y="414.0186">(out)</text><rect fill="#FEFECE" filter="url(#f1muzm3ktb3kdc)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="89" x="520" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="75" x="527" y="22.9951">InnerRing5</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="39" x="545" y="39.292">(new)</text><rect fill="#FEFECE" filter="url(#f1muzm3ktb3kdc)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="89" x="520" y="377.7266"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="75" x="527" y="397.7217">InnerRing5</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="39" x="545" y="414.0186">(new)</text><rect fill="#FEFECE" filter="url(#f1muzm3ktb3kdc)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="90" x="623" y="19.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="76" x="630" y="39.292">Committee</text><rect fill="#FEFECE" filter="url(#f1muzm3ktb3kdc)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="90" x="623" y="377.7266"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="76" x="630" y="397.7217">Committee</text><path d="M13,71.5938 L77,71.5938 L77,78.5938 L67,88.5938 L13,88.5938 L13,71.5938 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="290.1328" style="stroke: #000000; stroke-width: 2.0;" width="714" x="13" y="71.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="28" y="84.6606">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="96" x="92" y="83.8042">[failed update]</text><polygon fill="#A80036" points="71.5,105.8594,61.5,109.8594,71.5,113.8594,67.5,109.8594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="65.5" x2="669" y1="109.8594" y2="109.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="196" x="77.5" y="104.7935">UpdateInnerRing( {1, 5, 6, 7} )</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="60.5" x2="102.5" y1="145.0586" y2="145.0586"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="102.5" x2="102.5" y1="145.0586" y2="158.0586"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="73.5" x2="102.5" y1="158.0586" y2="158.0586"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="66.5" x2="76.5" y1="153.0586" y2="163.0586"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="66.5" x2="76.5" y1="163.0586" y2="153.0586"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="34" x="67.5" y="139.9927">panic</text><path d="M113,122.8594 L113,162.8594 L295,162.8594 L295,132.8594 L285,122.8594 L113,122.8594 " fill="#FBFB77" filter="url(#f1muzm3ktb3kdc)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M285,122.8594 L285,132.8594 L295,132.8594 L285,122.8594 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="91" x="119" y="139.9263">at least 2\3+1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="161" x="119" y="155.0591">nodes must be the same</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="13" x2="727" y1="173.125" y2="173.125"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="110" x="18" y="183.3354">[success update]</text><polygon fill="#A80036" points="71.5,204.0625,61.5,208.0625,71.5,212.0625,67.5,208.0625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="65.5" x2="669" y1="208.0625" y2="208.0625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="196" x="77.5" y="202.9966">UpdateInnerRing( {1, 2, 3, 5} )</text><polygon fill="#A80036" points="142.5,233.1953,152.5,237.1953,142.5,241.1953,146.5,237.1953" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="60.5" x2="148.5" y1="237.1953" y2="237.1953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="37" x="67.5" y="232.1294">Notify</text><polygon fill="#A80036" points="245.5,262.3281,255.5,266.3281,245.5,270.3281,249.5,266.3281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="60.5" x2="251.5" y1="266.3281" y2="266.3281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="37" x="67.5" y="261.2622">Notify</text><polygon fill="#A80036" points="348.5,291.4609,358.5,295.4609,348.5,299.4609,352.5,295.4609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="60.5" x2="354.5" y1="295.4609" y2="295.4609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="37" x="67.5" y="290.395">Notify</text><polygon fill="#A80036" points="451.5,320.5938,461.5,324.5938,451.5,328.5938,455.5,324.5938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="60.5" x2="457.5" y1="324.5938" y2="324.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="37" x="67.5" y="319.5278">Notify</text><polygon fill="#A80036" points="554.5,349.7266,564.5,353.7266,554.5,357.7266,558.5,353.7266" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="60.5" x2="560.5" y1="353.7266" y2="353.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="37" x="67.5" y="348.6606">Notify</text><!--
@startuml

participant "NeoFS\ncontract" as nfscon
participant "InnerRing1" as ir0
participant "InnerRing2" as ir1
participant "InnerRing3" as ir2
participant "InnerRing4\n(out)" as ir3
participant "InnerRing5\n(new)" as ir4
participant "Committee" as cmt

alt failed update

cmt -> nfscon: UpdateInnerRing( {1, 5, 6, 7} )
nfscon -x nfscon: panic
note right
at least 2\3+1
nodes must be the same
end note

else success update

cmt -> nfscon: UpdateInnerRing( {1, 2, 3, 5} )
nfscon - -> ir0: Notify
nfscon - -> ir1: Notify
nfscon - -> ir2: Notify
nfscon - -> ir3: Notify
nfscon - -> ir4: Notify
end

@enduml

PlantUML version 1.2019.07(Mon Jun 24 22:59:20 MSK 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.8+10-post-Debian-1deb10u1
Operating System: Linux
OS Version: 4.19.0-10-amd64
Default Encoding: UTF-8
Language: ru
Country: RU
--></g></svg>